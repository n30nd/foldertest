[2024-11-05 17:15:55,836][flwr][INFO] - Starting Flower simulation, config: num_rounds=15, no round_timeout
[2024-11-05 17:16:03,184][flwr][INFO] - Flower VCE: Ray initialized with resources: {'node:__internal_head__': 1.0, 'CPU': 12.0, 'node:172.16.1.72': 1.0, 'memory': 5053159835.0, 'object_store_memory': 2526579916.0}
[2024-11-05 17:16:03,185][flwr][INFO] - Optimize your simulation with Flower VCE: https://flower.ai/docs/framework/how-to-run-simulations.html
[2024-11-05 17:16:03,186][flwr][INFO] - Flower VCE: Resources for each Virtual Client: {'num_cpus': 2, 'num_gpus': 0.0}
[2024-11-05 17:16:03,236][flwr][INFO] - Flower VCE: Creating VirtualClientEngineActorPool with 6 actors
[2024-11-05 17:16:03,237][flwr][INFO] - [INIT]
[2024-11-05 17:16:03,238][flwr][INFO] - Requesting initial parameters from one random client
[2024-11-05 17:16:10,576][flwr][INFO] - Received initial parameters from one random client
[2024-11-05 17:16:10,576][flwr][INFO] - Starting evaluation of initial global parameters
[2024-11-05 17:16:17,948][flwr][INFO] - initial parameters (loss, other metrics): 0.02220458718828666, {'accuracy': 0.5528846153846154}
[2024-11-05 17:16:17,948][flwr][INFO] - 
[2024-11-05 17:16:17,948][flwr][INFO] - [ROUND 1]
[2024-11-05 17:16:17,949][flwr][INFO] - configure_fit: strategy sampled 10 clients (out of 20)
[2024-11-05 17:16:19,953][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:19,954][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:21,815][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:21,815][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:23,843][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:23,844][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:24,583][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:24,586][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:25,070][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:25,070][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:25,105][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:25,105][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:25,247][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:25,247][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:25,280][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:25,281][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:25,927][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:25,927][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:26,402][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:26,402][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:26,403][flwr][INFO] - aggregate_fit: received 0 results and 10 failures
[2024-11-05 17:16:33,799][flwr][INFO] - fit progress: (1, 0.02220458718828666, {'accuracy': 0.5528846153846154}, 15.850984312000946)
[2024-11-05 17:16:33,800][flwr][INFO] - configure_evaluate: strategy sampled 10 clients (out of 20)
[2024-11-05 17:16:36,081][flwr][INFO] - aggregate_evaluate: received 10 results and 0 failures
[2024-11-05 17:16:36,081][root][INFO] - EVALUATE_METRICS_AGGREGATION: 0.5
[2024-11-05 17:16:36,081][flwr][INFO] - 
[2024-11-05 17:16:36,081][flwr][INFO] - [ROUND 2]
[2024-11-05 17:16:36,082][flwr][INFO] - configure_fit: strategy sampled 10 clients (out of 20)
[2024-11-05 17:16:38,349][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:38,357][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:38,470][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:38,471][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:38,776][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:38,777][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:38,844][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:38,844][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:38,946][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:38,948][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:39,226][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:39,227][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:40,465][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:40,465][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:40,525][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:40,525][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:40,534][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:40,535][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:40,673][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:40,673][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:40,674][flwr][INFO] - aggregate_fit: received 0 results and 10 failures
[2024-11-05 17:16:47,963][flwr][INFO] - fit progress: (2, 0.02220458718828666, {'accuracy': 0.5528846153846154}, 30.014468789999228)
[2024-11-05 17:16:47,963][flwr][INFO] - configure_evaluate: strategy sampled 10 clients (out of 20)
[2024-11-05 17:16:50,133][flwr][INFO] - aggregate_evaluate: received 10 results and 0 failures
[2024-11-05 17:16:50,134][root][INFO] - EVALUATE_METRICS_AGGREGATION: 0.5094017094017094
[2024-11-05 17:16:50,134][flwr][INFO] - 
[2024-11-05 17:16:50,135][flwr][INFO] - [ROUND 3]
[2024-11-05 17:16:50,136][flwr][INFO] - configure_fit: strategy sampled 10 clients (out of 20)
[2024-11-05 17:16:52,460][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:52,461][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:52,463][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:52,464][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:52,538][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:52,561][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:52,592][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:52,593][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:52,619][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:52,619][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:52,731][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:52,734][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:54,233][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:54,234][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:54,240][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:54,241][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:54,420][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:54,421][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:54,432][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:16:54,432][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:16:54,433][flwr][INFO] - aggregate_fit: received 0 results and 10 failures
[2024-11-05 17:17:01,882][flwr][INFO] - fit progress: (3, 0.02220458718828666, {'accuracy': 0.5528846153846154}, 43.93391049999991)
[2024-11-05 17:17:01,882][flwr][INFO] - configure_evaluate: strategy sampled 10 clients (out of 20)
[2024-11-05 17:17:04,154][flwr][INFO] - aggregate_evaluate: received 10 results and 0 failures
[2024-11-05 17:17:04,154][root][INFO] - EVALUATE_METRICS_AGGREGATION: 0.49230769230769234
[2024-11-05 17:17:04,154][flwr][INFO] - 
[2024-11-05 17:17:04,154][flwr][INFO] - [ROUND 4]
[2024-11-05 17:17:04,155][flwr][INFO] - configure_fit: strategy sampled 10 clients (out of 20)
[2024-11-05 17:17:06,742][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:06,745][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:06,875][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:06,877][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:07,047][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:07,048][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:07,050][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:07,054][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:07,152][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:07,153][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:07,175][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:07,176][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:08,404][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:08,404][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:08,686][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:08,687][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:08,760][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:08,760][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:09,098][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:09,099][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:09,099][flwr][INFO] - aggregate_fit: received 0 results and 10 failures
[2024-11-05 17:17:16,951][flwr][INFO] - fit progress: (4, 0.02220458718828666, {'accuracy': 0.5528846153846154}, 59.00316501599809)
[2024-11-05 17:17:16,952][flwr][INFO] - configure_evaluate: strategy sampled 10 clients (out of 20)
[2024-11-05 17:17:19,453][flwr][INFO] - aggregate_evaluate: received 10 results and 0 failures
[2024-11-05 17:17:19,453][root][INFO] - EVALUATE_METRICS_AGGREGATION: 0.48461538461538456
[2024-11-05 17:17:19,453][flwr][INFO] - 
[2024-11-05 17:17:19,453][flwr][INFO] - [ROUND 5]
[2024-11-05 17:17:19,454][flwr][INFO] - configure_fit: strategy sampled 10 clients (out of 20)
[2024-11-05 17:17:21,813][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:21,813][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:21,865][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:21,872][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:21,915][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:21,916][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:22,065][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:22,066][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:22,200][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:22,204][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:22,266][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:22,267][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:23,957][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:23,957][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:23,990][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:23,997][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:24,081][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:24,082][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:24,336][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:24,336][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:24,337][flwr][INFO] - aggregate_fit: received 0 results and 10 failures
[2024-11-05 17:17:32,282][flwr][INFO] - fit progress: (5, 0.02220458718828666, {'accuracy': 0.5528846153846154}, 74.33369806400151)
[2024-11-05 17:17:32,282][flwr][INFO] - configure_evaluate: strategy sampled 10 clients (out of 20)
[2024-11-05 17:17:34,901][flwr][INFO] - aggregate_evaluate: received 10 results and 0 failures
[2024-11-05 17:17:34,902][root][INFO] - EVALUATE_METRICS_AGGREGATION: 0.5153846153846153
[2024-11-05 17:17:34,902][flwr][INFO] - 
[2024-11-05 17:17:34,902][flwr][INFO] - [ROUND 6]
[2024-11-05 17:17:34,902][flwr][INFO] - configure_fit: strategy sampled 10 clients (out of 20)
[2024-11-05 17:17:37,445][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:37,447][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:37,777][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:37,778][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:37,833][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:37,835][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:37,876][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:37,877][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:38,091][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:38,091][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:38,103][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:38,105][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:39,554][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:39,554][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:39,770][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:39,770][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:40,001][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:40,001][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:40,127][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:40,128][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:40,129][flwr][INFO] - aggregate_fit: received 0 results and 10 failures
[2024-11-05 17:17:47,975][flwr][INFO] - fit progress: (6, 0.02220458718828666, {'accuracy': 0.5528846153846154}, 90.02664130899939)
[2024-11-05 17:17:47,975][flwr][INFO] - configure_evaluate: strategy sampled 10 clients (out of 20)
[2024-11-05 17:17:50,346][flwr][INFO] - aggregate_evaluate: received 10 results and 0 failures
[2024-11-05 17:17:50,347][root][INFO] - EVALUATE_METRICS_AGGREGATION: 0.4849002849002849
[2024-11-05 17:17:50,347][flwr][INFO] - 
[2024-11-05 17:17:50,347][flwr][INFO] - [ROUND 7]
[2024-11-05 17:17:50,348][flwr][INFO] - configure_fit: strategy sampled 10 clients (out of 20)
[2024-11-05 17:17:52,601][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:52,601][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:52,825][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:52,827][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:52,917][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:52,920][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:53,015][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:53,019][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:53,020][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:53,020][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:53,022][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:53,023][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:54,613][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:54,614][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:54,930][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:54,930][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:55,008][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:55,008][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:55,010][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:17:55,010][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:17:55,011][flwr][INFO] - aggregate_fit: received 0 results and 10 failures
[2024-11-05 17:18:02,774][flwr][INFO] - fit progress: (7, 0.02220458718828666, {'accuracy': 0.5528846153846154}, 104.82569078199958)
[2024-11-05 17:18:02,774][flwr][INFO] - configure_evaluate: strategy sampled 10 clients (out of 20)
[2024-11-05 17:18:05,183][flwr][INFO] - aggregate_evaluate: received 10 results and 0 failures
[2024-11-05 17:18:05,185][root][INFO] - EVALUATE_METRICS_AGGREGATION: 0.5002849002849002
[2024-11-05 17:18:05,185][flwr][INFO] - 
[2024-11-05 17:18:05,186][flwr][INFO] - [ROUND 8]
[2024-11-05 17:18:05,187][flwr][INFO] - configure_fit: strategy sampled 10 clients (out of 20)
[2024-11-05 17:18:07,550][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:07,551][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:07,615][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:07,616][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:07,671][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:07,671][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:07,790][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:07,793][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:07,926][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:07,928][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:08,228][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:08,231][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:09,632][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:09,632][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:09,903][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:09,904][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:09,964][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:09,964][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:09,968][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:09,968][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:09,969][flwr][INFO] - aggregate_fit: received 0 results and 10 failures
[2024-11-05 17:18:17,773][flwr][INFO] - fit progress: (8, 0.02220458718828666, {'accuracy': 0.5528846153846154}, 119.82516165999914)
[2024-11-05 17:18:17,774][flwr][INFO] - configure_evaluate: strategy sampled 10 clients (out of 20)
[2024-11-05 17:18:20,217][flwr][INFO] - aggregate_evaluate: received 10 results and 0 failures
[2024-11-05 17:18:20,217][root][INFO] - EVALUATE_METRICS_AGGREGATION: 0.5216524216524215
[2024-11-05 17:18:20,217][flwr][INFO] - 
[2024-11-05 17:18:20,217][flwr][INFO] - [ROUND 9]
[2024-11-05 17:18:20,218][flwr][INFO] - configure_fit: strategy sampled 10 clients (out of 20)
[2024-11-05 17:18:22,754][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:22,774][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:22,804][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:22,806][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:22,974][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:22,976][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:23,173][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:23,175][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:23,202][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:23,202][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:23,477][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:23,477][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:24,623][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:24,624][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:25,034][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:25,034][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:25,169][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:25,170][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:25,194][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:25,194][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:25,194][flwr][INFO] - aggregate_fit: received 0 results and 10 failures
[2024-11-05 17:18:32,958][flwr][INFO] - fit progress: (9, 0.02220458718828666, {'accuracy': 0.5528846153846154}, 135.0100961800017)
[2024-11-05 17:18:32,959][flwr][INFO] - configure_evaluate: strategy sampled 10 clients (out of 20)
[2024-11-05 17:18:35,512][flwr][INFO] - aggregate_evaluate: received 10 results and 0 failures
[2024-11-05 17:18:35,513][root][INFO] - EVALUATE_METRICS_AGGREGATION: 0.47549857549857555
[2024-11-05 17:18:35,513][flwr][INFO] - 
[2024-11-05 17:18:35,513][flwr][INFO] - [ROUND 10]
[2024-11-05 17:18:35,513][flwr][INFO] - configure_fit: strategy sampled 10 clients (out of 20)
[2024-11-05 17:18:38,151][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:38,154][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:38,311][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:38,314][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:38,421][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:38,433][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:38,471][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:38,473][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:38,651][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:38,653][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:38,730][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:38,731][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:40,380][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:40,381][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:40,483][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:40,484][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:40,604][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:40,608][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:40,713][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:40,714][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:40,715][flwr][INFO] - aggregate_fit: received 0 results and 10 failures
[2024-11-05 17:18:48,720][flwr][INFO] - fit progress: (10, 0.02220458718828666, {'accuracy': 0.5528846153846154}, 150.77206243399996)
[2024-11-05 17:18:48,721][flwr][INFO] - configure_evaluate: strategy sampled 10 clients (out of 20)
[2024-11-05 17:18:51,299][flwr][INFO] - aggregate_evaluate: received 10 results and 0 failures
[2024-11-05 17:18:51,300][root][INFO] - EVALUATE_METRICS_AGGREGATION: 0.5156695156695157
[2024-11-05 17:18:51,300][flwr][INFO] - 
[2024-11-05 17:18:51,300][flwr][INFO] - [ROUND 11]
[2024-11-05 17:18:51,301][flwr][INFO] - configure_fit: strategy sampled 10 clients (out of 20)
[2024-11-05 17:18:53,717][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:53,719][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:53,779][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:53,779][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:53,842][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:53,844][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:54,101][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:54,102][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:54,217][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:54,218][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:54,332][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:54,333][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:56,005][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:56,006][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:56,026][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:56,027][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:56,104][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:56,104][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:56,455][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:18:56,455][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:18:56,456][flwr][INFO] - aggregate_fit: received 0 results and 10 failures
[2024-11-05 17:19:04,094][flwr][INFO] - fit progress: (11, 0.02220458718828666, {'accuracy': 0.5528846153846154}, 166.14593766599864)
[2024-11-05 17:19:04,094][flwr][INFO] - configure_evaluate: strategy sampled 10 clients (out of 20)
[2024-11-05 17:19:06,548][flwr][INFO] - aggregate_evaluate: received 10 results and 0 failures
[2024-11-05 17:19:06,549][root][INFO] - EVALUATE_METRICS_AGGREGATION: 0.5041310541310542
[2024-11-05 17:19:06,549][flwr][INFO] - 
[2024-11-05 17:19:06,549][flwr][INFO] - [ROUND 12]
[2024-11-05 17:19:06,549][flwr][INFO] - configure_fit: strategy sampled 10 clients (out of 20)
[2024-11-05 17:19:09,009][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:09,014][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:09,119][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:09,125][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:09,258][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:09,260][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:09,346][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:09,347][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:09,418][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:09,422][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:09,573][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:09,574][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:11,236][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:11,236][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:11,325][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:11,325][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:11,400][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:11,400][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:11,528][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:11,528][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:11,529][flwr][INFO] - aggregate_fit: received 0 results and 10 failures
[2024-11-05 17:19:19,558][flwr][INFO] - fit progress: (12, 0.02220458718828666, {'accuracy': 0.5528846153846154}, 181.61019919599858)
[2024-11-05 17:19:19,559][flwr][INFO] - configure_evaluate: strategy sampled 10 clients (out of 20)
[2024-11-05 17:19:21,794][flwr][INFO] - aggregate_evaluate: received 10 results and 0 failures
[2024-11-05 17:19:21,794][root][INFO] - EVALUATE_METRICS_AGGREGATION: 0.5002849002849002
[2024-11-05 17:19:21,794][flwr][INFO] - 
[2024-11-05 17:19:21,794][flwr][INFO] - [ROUND 13]
[2024-11-05 17:19:21,795][flwr][INFO] - configure_fit: strategy sampled 10 clients (out of 20)
[2024-11-05 17:19:24,274][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:24,275][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:24,497][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:24,497][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:24,584][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:24,587][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:24,754][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:24,755][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:24,766][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:24,766][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:24,855][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:24,855][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:26,491][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:26,492][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:26,572][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:26,573][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:26,704][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:26,704][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:26,964][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:26,964][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:26,965][flwr][INFO] - aggregate_fit: received 0 results and 10 failures
[2024-11-05 17:19:34,914][flwr][INFO] - fit progress: (13, 0.02220458718828666, {'accuracy': 0.5528846153846154}, 196.96639229300126)
[2024-11-05 17:19:34,915][flwr][INFO] - configure_evaluate: strategy sampled 10 clients (out of 20)
[2024-11-05 17:19:37,292][flwr][INFO] - aggregate_evaluate: received 10 results and 0 failures
[2024-11-05 17:19:37,292][root][INFO] - EVALUATE_METRICS_AGGREGATION: 0.5247863247863247
[2024-11-05 17:19:37,292][flwr][INFO] - 
[2024-11-05 17:19:37,292][flwr][INFO] - [ROUND 14]
[2024-11-05 17:19:37,293][flwr][INFO] - configure_fit: strategy sampled 10 clients (out of 20)
[2024-11-05 17:19:39,476][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:39,477][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:39,789][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:39,790][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:39,845][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:39,846][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:39,955][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:39,957][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:39,959][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:39,959][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:40,186][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:40,190][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:41,625][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:41,626][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:41,888][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:41,888][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:41,947][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:41,947][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:42,081][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:42,081][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:42,082][flwr][INFO] - aggregate_fit: received 0 results and 10 failures
[2024-11-05 17:19:49,754][flwr][INFO] - fit progress: (14, 0.02220458718828666, {'accuracy': 0.5528846153846154}, 211.80623114099944)
[2024-11-05 17:19:49,755][flwr][INFO] - configure_evaluate: strategy sampled 10 clients (out of 20)
[2024-11-05 17:19:52,151][flwr][INFO] - aggregate_evaluate: received 10 results and 0 failures
[2024-11-05 17:19:52,153][root][INFO] - EVALUATE_METRICS_AGGREGATION: 0.5079772079772079
[2024-11-05 17:19:52,153][flwr][INFO] - 
[2024-11-05 17:19:52,154][flwr][INFO] - [ROUND 15]
[2024-11-05 17:19:52,155][flwr][INFO] - configure_fit: strategy sampled 10 clients (out of 20)
[2024-11-05 17:19:54,726][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:54,728][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:54,794][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:54,794][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:54,888][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:54,890][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:54,956][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:54,957][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:54,973][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:54,974][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191627, ip=172.16.1.72, actor_id=fc223d5e9b274b2a5a9eef5e01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x75559808ecd0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:55,248][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:55,248][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191629, ip=172.16.1.72, actor_id=e05dfa9a151d04e5a3f56e6b01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x703794453ca0>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:56,843][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:56,844][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191631, ip=172.16.1.72, actor_id=2f6da8251989c5ed2902777c01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7421cc354c40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:56,919][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:56,919][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191628, ip=172.16.1.72, actor_id=86a4c98fd0eb9eecfe37f6e201000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x7c218064ec70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:57,005][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:57,006][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191630, ip=172.16.1.72, actor_id=ab211a58235401d8cbe5e3bc01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x70a7b44cec40>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:57,227][flwr][ERROR] - Traceback (most recent call last):
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_client_proxy.py", line 94, in _submit_job
    out_mssg, updated_context = self.actor_pool.get_client_result(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 398, in get_client_result
    return self._fetch_future_result(cid)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 279, in _fetch_future_result
    res_cid, out_mssg, updated_context = ray.get(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 2667, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/ray/_private/worker.py", line 864, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(ClientAppException): [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment

[2024-11-05 17:19:57,228][flwr][ERROR] - [36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 143, in __call__
    return self._call(message, context)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client_app.py", line 126, in ffn
    out_message = handle_legacy_message_from_msgtype(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/message_handler/message_handler.py", line 129, in handle_legacy_message_from_msgtype
    fit_res = maybe_call_fit(
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/client.py", line 255, in maybe_call_fit
    return client.fit(fit_ins)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/client/numpy_client.py", line 259, in _fit
    results = self.numpy_client.fit(parameters, ins.config)  # type: ignore
  File "/media/namvq/Data/code_flwr/turorial1/client.py", line 71, in fit
    train(self.model, self.trainloader, optim, epochs, self.device)
  File "/media/namvq/Data/code_flwr/turorial1/model.py", line 84, in train
    proximal_term += (local_weights - global_weights).norm(2)
UnboundLocalError: local variable 'proximal_term' referenced before assignment

The above exception was the direct cause of the following exception:

[36mray::ClientAppActor.run()[39m (pid=191625, ip=172.16.1.72, actor_id=ae76d81fe2194425a20d96ca01000000, repr=<flwr.simulation.ray_transport.ray_actor.ClientAppActor object at 0x71e9a80efc70>)
  File "/media/namvq/Data/anaconda3/envs/env1/lib/python3.9/site-packages/flwr/simulation/ray_transport/ray_actor.py", line 63, in run
    raise ClientAppException(str(ex)) from ex
flwr.client.client_app.ClientAppException: 
Exception ClientAppException occurred. Message: local variable 'proximal_term' referenced before assignment
[2024-11-05 17:19:57,229][flwr][INFO] - aggregate_fit: received 0 results and 10 failures
[2024-11-05 17:20:04,865][flwr][INFO] - fit progress: (15, 0.02220458718828666, {'accuracy': 0.5528846153846154}, 226.91736325300008)
[2024-11-05 17:20:04,866][flwr][INFO] - configure_evaluate: strategy sampled 10 clients (out of 20)
[2024-11-05 17:20:07,025][flwr][INFO] - aggregate_evaluate: received 10 results and 0 failures
[2024-11-05 17:20:07,025][root][INFO] - EVALUATE_METRICS_AGGREGATION: 0.48703703703703705
[2024-11-05 17:20:07,026][flwr][INFO] - 
[2024-11-05 17:20:07,026][flwr][INFO] - [SUMMARY]
[2024-11-05 17:20:07,026][flwr][INFO] - Run finished 15 round(s) in 229.08s
[2024-11-05 17:20:07,027][flwr][INFO] - 	History (loss, distributed):
[2024-11-05 17:20:07,027][flwr][INFO] - 		round 1: 0.026671988918231082
[2024-11-05 17:20:07,028][flwr][INFO] - 		round 2: 0.026568404604227113
[2024-11-05 17:20:07,028][flwr][INFO] - 		round 3: 0.0266723449413593
[2024-11-05 17:20:07,028][flwr][INFO] - 		round 4: 0.026671788325676554
[2024-11-05 17:20:07,028][flwr][INFO] - 		round 5: 0.026663026442894568
[2024-11-05 17:20:07,028][flwr][INFO] - 		round 6: 0.026475320166332434
[2024-11-05 17:20:07,028][flwr][INFO] - 		round 7: 0.026463053071940384
[2024-11-05 17:20:07,028][flwr][INFO] - 		round 8: 0.026564760756628465
[2024-11-05 17:20:07,029][flwr][INFO] - 		round 9: 0.026584426850674837
[2024-11-05 17:20:07,029][flwr][INFO] - 		round 10: 0.026464960879070472
[2024-11-05 17:20:07,029][flwr][INFO] - 		round 11: 0.026471654480678748
[2024-11-05 17:20:07,029][flwr][INFO] - 		round 12: 0.026465220159275236
[2024-11-05 17:20:07,029][flwr][INFO] - 		round 13: 0.02655743138912397
[2024-11-05 17:20:07,029][flwr][INFO] - 		round 14: 0.02646755413961547
[2024-11-05 17:20:07,029][flwr][INFO] - 		round 15: 0.02656631185288443
[2024-11-05 17:20:07,029][flwr][INFO] - 	History (loss, centralized):
[2024-11-05 17:20:07,030][flwr][INFO] - 		round 0: 0.02220458718828666
[2024-11-05 17:20:07,030][flwr][INFO] - 		round 1: 0.02220458718828666
[2024-11-05 17:20:07,030][flwr][INFO] - 		round 2: 0.02220458718828666
[2024-11-05 17:20:07,030][flwr][INFO] - 		round 3: 0.02220458718828666
[2024-11-05 17:20:07,030][flwr][INFO] - 		round 4: 0.02220458718828666
[2024-11-05 17:20:07,030][flwr][INFO] - 		round 5: 0.02220458718828666
[2024-11-05 17:20:07,030][flwr][INFO] - 		round 6: 0.02220458718828666
[2024-11-05 17:20:07,031][flwr][INFO] - 		round 7: 0.02220458718828666
[2024-11-05 17:20:07,031][flwr][INFO] - 		round 8: 0.02220458718828666
[2024-11-05 17:20:07,031][flwr][INFO] - 		round 9: 0.02220458718828666
[2024-11-05 17:20:07,031][flwr][INFO] - 		round 10: 0.02220458718828666
[2024-11-05 17:20:07,031][flwr][INFO] - 		round 11: 0.02220458718828666
[2024-11-05 17:20:07,031][flwr][INFO] - 		round 12: 0.02220458718828666
[2024-11-05 17:20:07,031][flwr][INFO] - 		round 13: 0.02220458718828666
[2024-11-05 17:20:07,032][flwr][INFO] - 		round 14: 0.02220458718828666
[2024-11-05 17:20:07,032][flwr][INFO] - 		round 15: 0.02220458718828666
[2024-11-05 17:20:07,032][flwr][INFO] - 	History (metrics, distributed, evaluate):
[2024-11-05 17:20:07,032][flwr][INFO] - 	{'federated_evaluate_accuracy': [(1, 0.5),
[2024-11-05 17:20:07,032][flwr][INFO] - 	                                 (2, 0.5094017094017094),
[2024-11-05 17:20:07,033][flwr][INFO] - 	                                 (3, 0.49230769230769234),
[2024-11-05 17:20:07,033][flwr][INFO] - 	                                 (4, 0.48461538461538456),
[2024-11-05 17:20:07,033][flwr][INFO] - 	                                 (5, 0.5153846153846153),
[2024-11-05 17:20:07,033][flwr][INFO] - 	                                 (6, 0.4849002849002849),
[2024-11-05 17:20:07,033][flwr][INFO] - 	                                 (7, 0.5002849002849002),
[2024-11-05 17:20:07,034][flwr][INFO] - 	                                 (8, 0.5216524216524215),
[2024-11-05 17:20:07,034][flwr][INFO] - 	                                 (9, 0.47549857549857555),
[2024-11-05 17:20:07,034][flwr][INFO] - 	                                 (10, 0.5156695156695157),
[2024-11-05 17:20:07,034][flwr][INFO] - 	                                 (11, 0.5041310541310542),
[2024-11-05 17:20:07,034][flwr][INFO] - 	                                 (12, 0.5002849002849002),
[2024-11-05 17:20:07,034][flwr][INFO] - 	                                 (13, 0.5247863247863247),
[2024-11-05 17:20:07,034][flwr][INFO] - 	                                 (14, 0.5079772079772079),
[2024-11-05 17:20:07,035][flwr][INFO] - 	                                 (15, 0.48703703703703705)]}
[2024-11-05 17:20:07,035][flwr][INFO] - 	History (metrics, centralized):
[2024-11-05 17:20:07,035][flwr][INFO] - 	{'accuracy': [(0, 0.5528846153846154),
[2024-11-05 17:20:07,035][flwr][INFO] - 	              (1, 0.5528846153846154),
[2024-11-05 17:20:07,035][flwr][INFO] - 	              (2, 0.5528846153846154),
[2024-11-05 17:20:07,035][flwr][INFO] - 	              (3, 0.5528846153846154),
[2024-11-05 17:20:07,035][flwr][INFO] - 	              (4, 0.5528846153846154),
[2024-11-05 17:20:07,035][flwr][INFO] - 	              (5, 0.5528846153846154),
[2024-11-05 17:20:07,036][flwr][INFO] - 	              (6, 0.5528846153846154),
[2024-11-05 17:20:07,036][flwr][INFO] - 	              (7, 0.5528846153846154),
[2024-11-05 17:20:07,036][flwr][INFO] - 	              (8, 0.5528846153846154),
[2024-11-05 17:20:07,036][flwr][INFO] - 	              (9, 0.5528846153846154),
[2024-11-05 17:20:07,036][flwr][INFO] - 	              (10, 0.5528846153846154),
[2024-11-05 17:20:07,036][flwr][INFO] - 	              (11, 0.5528846153846154),
[2024-11-05 17:20:07,036][flwr][INFO] - 	              (12, 0.5528846153846154),
[2024-11-05 17:20:07,036][flwr][INFO] - 	              (13, 0.5528846153846154),
[2024-11-05 17:20:07,037][flwr][INFO] - 	              (14, 0.5528846153846154),
[2024-11-05 17:20:07,037][flwr][INFO] - 	              (15, 0.5528846153846154)]}
[2024-11-05 17:20:07,037][flwr][INFO] - 
